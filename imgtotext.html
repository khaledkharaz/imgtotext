<!DOCTYPE html>
<html>
<head>
    <title>Image to Text Converter</title>
    <style>
        /* --- CSS Styles (from style.css) --- */
        body {
            font-family: sans-serif;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        #imageUpload {
            margin-bottom: 10px;
        }

        #imagePreview {
            max-width: 300px;
            margin-bottom: 10px;
        }

        #imagePreview img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        #convertButton {
            padding: 10px 20px;
            cursor: pointer;
        }

        #textOutput {
            width: 100%;
            height: 200px;
            margin-top: 10px;
            box-sizing: border-box;
            padding: 8px;
            font-family: monospace;
        }
    </style>
</head>
<body>

    <h1>Image to Text Converter</h1>

    <input type="file" id="imageUpload" accept="image/*">
    <div id="imagePreview"></div>
    <button id="convertButton">Convert to Text</button>
    <textarea id="textOutput" placeholder="Extracted text will appear here"></textarea>

    <script src="https://unpkg.com/tesseract.js@v5.x/dist/tesseract.min.js"></script>
    <script>
        /* --- JavaScript Code (from script.js) --- */
        document.addEventListener('DOMContentLoaded', () => {
            const imageUpload = document.getElementById('imageUpload');
            const imagePreview = document.getElementById('imagePreview');
            const convertButton = document.getElementById('convertButton');
            const textOutput = document.getElementById('textOutput');

            imageUpload.addEventListener('change', (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        imagePreview.innerHTML = `<img src="${e.target.result}" alt="Uploaded Image">`;
                    };
                    reader.readAsDataURL(file);
                } else {
                    imagePreview.innerHTML = '';
                }
            });

            convertButton.addEventListener('click', async () => {
                const file = imageUpload.files[0];
                if (!file) {
                    alert("Please upload an image first.");
                    return;
                }

                textOutput.value = "Processing... Please wait...";
                try {
                    const { data: { text } } = await Tesseract.recognize(
                        file,
                        'eng',
                        { logger: m => console.log(m) }
                    );
                    textOutput.value = text;

                } catch (error) {
                    console.error("OCR Error:", error);
                    textOutput.value = "Error during OCR. Please try again or use a different image.";
                }
            });
        });
    </script>

</body>
</html>